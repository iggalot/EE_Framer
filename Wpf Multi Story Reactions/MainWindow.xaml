<Window x:Class="StructuralPlanner.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Structural Planner" Height="900" Width="1400"
        WindowStartupLocation="CenterScreen"
        PreviewKeyDown="Window_PreviewKeyDown"
        Background="#FF2B2B2B">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ================= TOP TOOLBAR ================= -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2"
                    Orientation="Horizontal"
                    Background="#FF3C3C3C"
                    Height="30"
                    VerticalAlignment="Top">

            <!-- Floor control buttons -->
            <Button x:Name="btnFoundationButton" Content="FDN" Width="30" Margin="5" Click="btnFoundationButton_Click"/>
            <Button x:Name="btnFloor1Button" Content="L1" Width="30" Margin="5" Click="btnFloor1Button_Click"/>
            <Button x:Name="btnFloor2Button" Content="L2" Width="30" Margin="5" Click="btnFloor2Button_Click"/>
            <Button x:Name="btnFloor3Button" Content="L3" Width="30" Margin="5" Click="btnFloor3Button_Click"/>
            <Button x:Name="btnRoofButton" Content="R4" Width="30" Margin="5" Click="btnRoofButton_Click"/>

            <Separator Width="10"/>

            <!-- Member creation controls -->
            <Button x:Name="btnAddBeamButton" Content="Beam" Width="80" Margin="5" Click="btnAddBeamButton_Click"/>
            <Button x:Name="btnAddColumnButton" Content="Column" Width="80" Margin="5" Click="btnAddColumnButton_Click"/>
            <Button x:Name="btnAddPolygonButton" Content="Polygon" Width="80" Margin="5" Click="btnAddPolygonButton_Click"/>
            <Button x:Name="btnAddRafterButton" Content="Rafter" Width="80" Margin="5" Click="btnAddRafterButton_Click"/>
            <Button x:Name="btnAddJoistButton" Content="Joist" Width="80" Margin="5" Click="btnAddJoistButton_Click"/>
            <Separator Width="10"/>

            <!-- Misc -->
            <Button x:Name="btnComputeReactionsButton" Content="Compute Reactions" Width="140" Margin="5" Click="btnComputeReactionsButton_Click"/>
            <Button x:Name="btnClearButton" Content="Clear All" Width="100" Margin="5" Click="btnClearButton_Click"/>
            <Button x:Name="btnCreateRoofButton" Content="Create Test Roof" Width="130" Margin="5" Click="btnCreateRoofButton_Click"/>
            <Separator Width="10"/>
        </StackPanel>

        <!-- ================= LEFT PANEL ================= -->
        <StackPanel Grid.Row="1" Grid.Column="0"
                    Background="#FF3C3C3C"
                    VerticalAlignment="Stretch">
            <CheckBox x:Name="ShowLabelsCheckBox"
                Content="Show Labels"
                Margin="5"
                IsChecked="True"
                Foreground="White"
                Checked="ShowLabelsCheckBox_Checked"
                Unchecked="ShowLabelsCheckBox_Unchecked"/>

            <TextBlock Text="Legend" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>
            <!--<StackPanel Orientation="Vertical" Margin="10,0,0,0">
                <TextBlock Text="Blue: Beams (current floor)" Foreground="LightBlue" Margin="0,5"/>
                <TextBlock Text="Gray: Columns (current floor)" Foreground="LightGray" Margin="0,5"/>
                <TextBlock Text="Light Gray: Columns (below floor)" Foreground="#66FFFFFF" Margin="0,5"/>
                <TextBlock Text="Green: Supports / Reactions" Foreground="LightGreen" Margin="0,5"/>
                <TextBlock Text="Grid: Reference Lines" Foreground="LightSlateGray" Margin="0,5"/>
            </StackPanel>-->

            <Separator Margin="10,20,10,10"/>

            <TextBlock Text="Member Data" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>

            <!-- SCROLLABLE Beam DataGrid -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="200">
                <DataGrid x:Name="BeamDataGrid"
                          AutoGenerateColumns="True"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          Background="White"
                          Foreground="Black"
                          Margin="0,5,0,10"/>
            </ScrollViewer>

            <TextBlock Text="Node Connections" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>

            <!-- SCROLLABLE Node Connections DataGrid -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="300">
                <DataGrid x:Name="NodeConnectionsDataGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          Margin="5"
                          HeadersVisibility="Column"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Node ID" Binding="{Binding NodeID}" Width="Auto"/>
                        <DataGridTextColumn Header="Floor" Binding="{Binding Floor}" Width="60" />
                        <DataGridTextColumn Header="Connected Members" Binding="{Binding ConnectedMembers}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>

        </StackPanel>

        <!-- ================= DRAWING CANVAS ================= -->
        <Border Grid.Row="1" Grid.Column="1"
                BorderThickness="1"
                BorderBrush="Gray"
                Background="WhiteSmoke"
                Margin="10"
                ClipToBounds="True">
            <Grid x:Name="CanvasContainer" Background="White">
                <!-- Canvas layers -->
                <Canvas x:Name="GridLayer" IsHitTestVisible="False"/>
                <Canvas x:Name="MemberLayer"
            Background="Transparent"
            MouseLeftButtonDown="MemberLayer_MouseLeftButtonDown"
            MouseMove="MemberLayer_MouseMove"
            MouseWheel="MainCanvas_MouseWheel"/>
                <Canvas x:Name="OverlayLayer"
            Background="Transparent"
            IsHitTestVisible="False"/>

                <!-- Buttons on top -->
                <StackPanel Orientation="Horizontal"
                            x:Name="spParallelLinesButtons"
                            Visibility="Collapsed"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Background="#66FFFFFF"
                Margin="4"
                Panel.ZIndex="10">
                    <Button x:Name="btnEdgePerp" Content="⊥ Edge" Width="70" Margin="2" Click="btnEdgePerp_Click"/>
                    <Button x:Name="btnVertical" Content="↕ Vert" Width="70" Margin="2" Click="btnVertical_Click"/>
                    <Button x:Name="btnHorizontal" Content="↔ Horz" Width="70" Margin="2" Click="btnHorizontal_Click"/>
                </StackPanel>
            </Grid>

        </Border>
    </Grid>
</Window>
