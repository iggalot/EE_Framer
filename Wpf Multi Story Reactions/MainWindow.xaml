<Window x:Class="StructuralPlanner.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Structural Planner" Height="900" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#FF2B2B2B">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ================= TOP TOOLBAR ================= -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2"
                    Orientation="Horizontal"
                    Background="#FF3C3C3C"
                    Height="60"
                    VerticalAlignment="Top">

            <!-- Floor control buttons -->
            <Button x:Name="Floor1Button" Content="Floor 1" Width="90" Margin="5" Click="Floor1Button_Click"/>
            <Button x:Name="Floor2Button" Content="Floor 2" Width="90" Margin="5" Click="Floor2Button_Click"/>
            <Button x:Name="Floor3Button" Content="Roof" Width="90" Margin="5" Click="RoofButton_Click"/>

            <Separator Width="20"/>

            <!-- Beam controls -->
            <Button x:Name="AddBeamButton" Content="Add Beam" Width="100" Margin="5" Click="AddBeamButton_Click"/>
            <Button x:Name="ComputeReactionsButton" Content="Compute Reactions" Width="140" Margin="5" Click="ComputeReactionsButton_Click"/>

            <Separator Width="20"/>

            <!-- Column controls -->
            <Button x:Name="AddColumnButton" Content="Add Column" Width="100" Margin="5" Click="AddColumnButton_Click"/>
            <Button x:Name="AddPolygonButton" Content="Add Polygon" Width="110" Margin="5" Click="AddPolygonButton_Click"/>
            <Button x:Name="AddParallelLineButton" Content="Add Parallel Line" Width="140" Margin="5" Click="AddParallelLineButton_Click"/>
            <Separator Width="20"/>

            <!-- Misc -->
            <Button x:Name="ClearButton" Content="Clear All" Width="100" Margin="5" Click="ClearButton_Click"/>
            <Button x:Name="CreateRoofButton" Content="Create Test Roof" Width="130" Margin="5" Click="CreateRoofButton_Click"/>

        </StackPanel>

        <!-- ================= LEFT PANEL ================= -->
        <StackPanel Grid.Row="1" Grid.Column="0"
                    Background="#FF3C3C3C"
                    VerticalAlignment="Stretch">

            <TextBlock Text="Legend" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>
            <StackPanel Orientation="Vertical" Margin="10,0,0,0">
                <TextBlock Text="Blue: Beams (current floor)" Foreground="LightBlue" Margin="0,5"/>
                <TextBlock Text="Gray: Columns (current floor)" Foreground="LightGray" Margin="0,5"/>
                <TextBlock Text="Light Gray: Columns (below floor)" Foreground="#66FFFFFF" Margin="0,5"/>
                <TextBlock Text="Green: Supports / Reactions" Foreground="LightGreen" Margin="0,5"/>
                <TextBlock Text="Grid: Reference Lines" Foreground="LightSlateGray" Margin="0,5"/>
            </StackPanel>

            <Separator Margin="10,20,10,10"/>

            <TextBlock Text="Member Data" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>

            <!-- SCROLLABLE Beam DataGrid -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="200">
                <DataGrid x:Name="BeamDataGrid"
                          AutoGenerateColumns="True"
                          CanUserAddRows="False"
                          HeadersVisibility="Column"
                          Background="White"
                          Foreground="Black"
                          Margin="0,5,0,10"/>
            </ScrollViewer>

            <TextBlock Text="Node Connections" FontWeight="Bold" Foreground="White" FontSize="16" Margin="0,0,0,10"/>

            <!-- SCROLLABLE Node Connections DataGrid -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Height="300">
                <DataGrid x:Name="NodeConnectionsDataGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          Margin="5"
                          HeadersVisibility="Column"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Node ID" Binding="{Binding NodeID}" Width="Auto"/>
                        <DataGridTextColumn Header="Floor" Binding="{Binding Floor}" Width="60" />
                        <DataGridTextColumn Header="Connected Members" Binding="{Binding ConnectedMembers}" Width="*" />
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>

        </StackPanel>

        <!-- ================= DRAWING CANVAS ================= -->
        <Border Grid.Row="1" Grid.Column="1"
                BorderThickness="1"
                BorderBrush="Gray"
                Background="WhiteSmoke"
                Margin="10"
                ClipToBounds="True">
            <Grid x:Name="CanvasContainer" Background="White">
                <!-- Canvas layers -->
                <Canvas x:Name="GridLayer" IsHitTestVisible="False"/>
                <Canvas x:Name="MemberLayer"
            Background="Transparent"
            MouseLeftButtonDown="MemberLayer_MouseLeftButtonDown"
            MouseMove="MemberLayer_MouseMove"
            MouseWheel="MainCanvas_MouseWheel"/>
                <Canvas x:Name="OverlayLayer"
            Background="Transparent"
            IsHitTestVisible="False"/>

                <!-- Buttons on top -->
                <StackPanel Orientation="Horizontal"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Background="#66FFFFFF"
                Margin="4"
                Panel.ZIndex="10">
                    <Button x:Name="BtnEdgePerp" Content="⊥ Edge" Width="70" Margin="2" Click="BtnEdgePerp_Click"/>
                    <Button x:Name="BtnVertical" Content="↕ Vert" Width="70" Margin="2" Click="BtnVertical_Click"/>
                    <Button x:Name="BtnHorizontal" Content="↔ Horz" Width="70" Margin="2" Click="BtnHorizontal_Click"/>
                </StackPanel>
            </Grid>

        </Border>
    </Grid>
</Window>
